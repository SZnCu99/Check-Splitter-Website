{"ast":null,"code":"var _jsxFileName = \"/Users/DeborahLiu/Desktop/mywebsite/frontend/my-app/src/newRecord.js\";\nimport React, { Component } from \"react\";\nimport Cookies from \"js-cookie\";\nimport NewTransaction from \"./NewTransaction\";\nimport Table from \"react-table-6\";\nimport 'react-table-6/react-table.css';\nimport axios from 'axios';\n\nclass newRecord extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      owner: Cookies.get(\"name\"),\n      date: null,\n      transactions: [],\n      currentName: null,\n      sharedBy: [],\n      numShared: 1,\n      intervalIsSet: false,\n      errors: {}\n    };\n\n    this.getTransactionFromDb = () => {\n      fetch('http://localhost:3001/api/getTransaction').then(transactions => transactions.json()).then(res => {\n        this.setState({\n          transactions: res.transactions\n        });\n      });\n      console.log(this.state.transactions);\n    };\n\n    this.addSharedBy = name => {\n      var temp = [...this.state.sharedBy];\n      temp.push(name);\n      this.setState({\n        sharedBy: temp\n      });\n      var num = this.state.numShared + 1;\n      this.setState({\n        numShared: num\n      });\n      console.log(this.state.sharedBy);\n      console.log(this.state.numShared);\n      console.log(this.state.currentName);\n      console.log(this.state.owner);\n    };\n\n    this.createRecord = event => {\n      axios.post('http://localhost:3001/api/putRecord', {\n        owner: this.state.owner,\n        date: this.state.date,\n        transactions: []\n      });\n    };\n  }\n\n  componentDidMount() {\n    this.getTransactionFromDb();\n\n    if (!this.state.intervalIsSet) {\n      let interval = setInterval(this.getDataFromDb, 1000);\n      this.setState({\n        intervalIsSet: interval\n      });\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.state.intervalIsSet) {\n      clearInterval(this.state.intervalIsSet);\n      this.setState({\n        intervalIsSet: null\n      });\n    }\n  }\n\n  render() {\n    const columns = [{\n      Header: 'Payer',\n      accessor: 'payer'\n    }, {\n      Header: 'Amount',\n      accessor: 'amount'\n    }, {\n      Header: 'Shared With',\n      accessor: 'displayShared'\n    }, {\n      Header: 'Comment',\n      accessor: 'comment'\n    }];\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89\n      },\n      __self: this\n    }, \"Creating new record for \", this.state.owner, \"...\", React.createElement(\"label\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, \"Shared with:\", this.state.sharedBy, React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"name\",\n      onChange: e => this.setState({\n        currentName: e.target.value\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      onClick: () => this.addSharedBy(this.state.currentName),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, \"Add Sharer\"), React.createElement(\"input\", {\n      type: \"text\",\n      placeholder: \"date\",\n      onChange: e => this.setState({\n        date: e.target.value\n      }),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 96\n      },\n      __self: this\n    }), React.createElement(\"button\", {\n      onClick: e => this.createRecord(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }, \"Create New Record\")), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100\n      },\n      __self: this\n    }, React.createElement(Table, {\n      columns: columns,\n      data: this.state.transactions,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101\n      },\n      __self: this\n    })), React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103\n      },\n      __self: this\n    }, React.createElement(NewTransaction, {\n      sharedPeople: this.state.sharedBy,\n      num: this.state.numShared,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104\n      },\n      __self: this\n    })));\n  }\n\n}\n\nexport default newRecord;","map":{"version":3,"sources":["/Users/DeborahLiu/Desktop/mywebsite/frontend/my-app/src/newRecord.js"],"names":["React","Component","Cookies","NewTransaction","Table","axios","newRecord","state","owner","get","date","transactions","currentName","sharedBy","numShared","intervalIsSet","errors","getTransactionFromDb","fetch","then","json","res","setState","console","log","addSharedBy","name","temp","push","num","createRecord","event","post","componentDidMount","interval","setInterval","getDataFromDb","componentWillUnmount","clearInterval","render","columns","Header","accessor","e","target","value"],"mappings":"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","sourcesContent":["import React, { Component } from \"react\";\nimport Cookies from \"js-cookie\";\nimport NewTransaction from \"./NewTransaction\";\nimport Table from \"react-table-6\";\nimport 'react-table-6/react-table.css'\nimport axios from 'axios';\n\nclass newRecord extends Component {\n  state = {\n    owner: Cookies.get(\"name\"),\n    date: null,\n    transactions: [],\n    currentName: null,\n    sharedBy: [],\n    numShared: 1,\n    intervalIsSet: false,\n    errors: {}\n  };\n\n  componentDidMount() {\n    this.getTransactionFromDb();\n    if (!this.state.intervalIsSet) {\n      let interval = setInterval(this.getDataFromDb, 1000);\n      this.setState({ intervalIsSet: interval });\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.state.intervalIsSet) {\n      clearInterval(this.state.intervalIsSet);\n      this.setState({ intervalIsSet: null });\n    }\n  }\n\n  getTransactionFromDb = () => {\n    fetch('http://localhost:3001/api/getTransaction')\n      .then((transactions) => transactions.json())\n      .then((res) => {\n        this.setState({ transactions: res.transactions});\n        });\n      console.log(this.state.transactions);\n  };\n\n  addSharedBy = (name) => {\n    var temp = [...this.state.sharedBy];\n    temp.push(name);\n    this.setState({sharedBy: temp});\n    var num = this.state.numShared + 1;\n    this.setState({numShared:num});\n    console.log(this.state.sharedBy);\n    console.log(this.state.numShared);\n    console.log(this.state.currentName);\n    console.log(this.state.owner);\n  };\n\n  createRecord = (event) =>{\n      axios.post('http://localhost:3001/api/putRecord', {\n        owner: this.state.owner,\n        date: this.state.date,\n        transactions: [],\n    });\n\n\n  };\n\n\n  \n  render() {\n    const columns = [\n            {\n              Header: 'Payer',\n              accessor: 'payer',\n            },\n            {\n              Header: 'Amount',\n              accessor: 'amount',\n            },\n            {\n              Header: 'Shared With',\n              accessor: 'displayShared'\n            },\n            {\n              Header: 'Comment',\n              accessor: 'comment',\n            },\n          ]\n\n    return (\n      <div>\n        \n          Creating new record for {this.state.owner}...\n          <label>\n            Shared with:{this.state.sharedBy}\n            <input type=\"text\" placeholder=\"name\" onChange={(e) => this.setState({ currentName: e.target.value })}></input>\n            <button onClick={() =>this.addSharedBy(this.state.currentName)}>Add Sharer</button>\n            <input type=\"text\" placeholder=\"date\" onChange={(e) => this.setState({ date: e.target.value})}></input>\n            <button onClick={(e) => this.createRecord(e)}>Create New Record</button>\n          </label>\n          \n        <div>\n          <Table columns={columns} data={this.state.transactions} />\n        </div>    \n        <div>\n        <NewTransaction sharedPeople={this.state.sharedBy} num={this.state.numShared}  />\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default newRecord;\n"]},"metadata":{},"sourceType":"module"}